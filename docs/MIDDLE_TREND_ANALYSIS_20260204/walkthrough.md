# 中期トレンド予測 (Middle Trend Predictor) 実装完了

動画「金・銀価格暴落 いつまで続くか？」の分析手法に基づき、中期トレンド分析モジュールを実装しました。

## 実装内容 (Implementation Details)

### 新規モジュール: `metal_analyzer/models/middle_trend_predictor.py`
このモジュールは、以下の4つのダッシュボード形式で日足・週足データを分析します。

| ダッシュボード | コンセプト (Youtube) | 実装ロジック |
| :--- | :--- | :--- |
| **1. 週足構造** | **根雪 (Deep Snow)** | 週足EMA (13, 26, 52) の配列による長期トレンド判定。長期トレンドが崩れていないか監視します。 |
| **2. 日足モメンタム** | **表層雪崩 (Surface Avalanche)** | 日足RSIとMACDにより、短期的な下落の勢いと回復の兆しを検知します。 |
| **3. ボラティリティ** | **暴風域 (The Storm / Warsh Mode)** | ボリンジャーバンド幅が過去平均の1.3倍を超えた場合、「高ボラティリティ（警戒）」と判定します。 |
| **4. 戦略** | **深い押し目 (Deep Dip)** | 「根雪（長期上昇）」が維持されている中で「表層雪崩（短期急落）」が起きた場合、**「戦略的買い (Deep Dip Buy)」** シグナルを出します。 |

### 検証スクリプト: `examples/verify_middle_trend.py`
実際の市場データ（Yahoo Financeから取得）を使用して、新機能の動作を確認するスクリプトです。

## 検証結果 (Verification Results)

最新のゴールドデータ (GC=F) を使用した実行結果（2026/02/04時点）:

```text
=== 中期トレンド分析 (Middle Trend Predictor) 検証 ===
(中略)
--- 分析結果 ---
週足構造 (Deep Snow): 強気トレンド (Deep Snow 安定)
日足モメンタム (Surface Alert): 上昇モメンタム (安定)
ボラティリティ (Warsh Mode): ⚠️ 高ボラティリティ (Warsh Mode)
戦略 (Deep Dip): 慎重なトレンドフォロー

総合コメント:
トレンドは上ですが、ボラティリティが高まっています（Warsh Mode）。ポジションサイズを落としてついていく局面です。
```

- **高ボラティリティ検知**: 直近の変動を受け、「Warsh Mode」相当の高ボラティリティ状態を正しく検知しました。
- **トレンド判定**: 長期的には「根雪（強気トレンド）」が維持されていると判定されました。
